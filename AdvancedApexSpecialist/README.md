<svg fill="none" viewBox="0 0 600 300" width="600" height="300" xmlns="http://www.w3.org/2000/svg">
  <foreignObject width="100%" height="100%">
<head>
<link rel="stylesheet" media="print" href="/one-trust/onetrust.min.css" onload="this.media=&#39;all&#39;" />

<meta content='#ffffff' name='msapplication-TileColor'>
<meta content='browserconfig.xml' name='msapplication-config'>
<meta content='#ffffff' name='theme-color'>
<link href='/apple-touch-icon-57x57.png' rel='apple-touch-icon' sizes='57x57'>
<link href='/apple-touch-icon-60x60.png' rel='apple-touch-icon' sizes='60x60'>
<link href='/apple-touch-icon-72x72.png' rel='apple-touch-icon' sizes='72x72'>
<link href='/apple-touch-icon-76x76.png' rel='apple-touch-icon' sizes='76x76'>
<link href='/apple-touch-icon-114x114.png' rel='apple-touch-icon' sizes='114x114'>
<link href='/apple-touch-icon-120x120.png' rel='apple-touch-icon' sizes='120x120'>
<link href='/apple-touch-icon-144x144.png' rel='apple-touch-icon' sizes='144x144'>
<link href='/apple-touch-icon-152x152.png' rel='apple-touch-icon' sizes='152x152'>
<link href='/apple-touch-icon-180x180.png' rel='apple-touch-icon' sizes='180x180'>
<link href='/android-chrome-192x192.png' rel='icon' sizes='192x192' type='image/png'>
<link href='/site.webmanifest' rel='manifest'>
<link color='#ffffff' href='/safari-pinned-tab.svg' rel='mask-icon'>
<link href='/favicon-32x32.png' rel='icon' sizes='32x32' type='image/png'>
<link href='/favicon-16x16.png' rel='icon' sizes='16x16' type='image/png'>
<link href='/favicon.ico' rel='shortcut icon'>

<div id="global-nav-container">
  <hgf-c360contextnav id="contextnav"></hgf-c360contextnav>
</div>

<main id='main'>
<div data-react-class="ModuleHeader" data-react-props="{&quot;content&quot;:{&quot;apiName&quot;:&quot;superbadge_aap&quot;,&quot;color&quot;:&quot;#02928b&quot;,&quot;contentUid&quot;:&quot;0260fdbe-0860-8c2a-76d0-4f8e948a1655&quot;,&quot;description&quot;:&quot;Build complex business logic using advanced Apex and Visualforce programming techniques.&quot;,&quot;image&quot;:&quot;https://res.cloudinary.com/hy4kyit2a/f_auto,fl_lossy,q_70/learn/superbadges/superbadge_aap/dcfd3a2d114b5954ea59f2b2cd061121_badge.png&quot;,&quot;points&quot;:&quot;16,000&quot;,&quot;title&quot;:&quot;Advanced Apex Specialist&quot;,&quot;subTitle&quot;:&quot;Superbadge&quot;,&quot;type&quot;:&quot;superbadge&quot;,&quot;estimatedTime&quot;:&quot;~16 hrs&quot;,&quot;unitCount&quot;:9,&quot;path&quot;:&quot;https://trailhead.salesforce.com/content/learn/superbadges/superbadge_aap&quot;,&quot;private&quot;:false,&quot;preview&quot;:null,&quot;tags&quot;:null},&quot;labels&quot;:{&quot;preview&quot;:&quot;preview&quot;,&quot;updated&quot;:&quot;Updated %{date}&quot;,&quot;completed&quot;:&quot;Completed %{date}&quot;,&quot;due&quot;:&quot;Due %{date}&quot;,&quot;points&quot;:&quot;+%{n} points&quot;,&quot;currency&quot;:&quot;$%{n}&quot;,&quot;registerNow&quot;:&quot;Register Now&quot;,&quot;progress&quot;:&quot;Progress: %{n}%&quot;,&quot;previewTooltip&quot;:&quot;Content Collection: %{namespace}, Release: %{releasedAt}. Last updated on %{updatedAt}.&quot;,&quot;showNUnits&quot;:&quot;Show %{n} Units&quot;,&quot;hideNUnits&quot;:&quot;Hide %{n} Units&quot;,&quot;showNSteps&quot;:&quot;Show %{n} Steps&quot;,&quot;hideNSteps&quot;:&quot;Hide %{n} Steps&quot;,&quot;unitCompleted&quot;:&quot;Completed&quot;,&quot;unitIncomplete&quot;:&quot;Incomplete&quot;},&quot;assetPaths&quot;:{&quot;loader&quot;:&quot;/assets/ajax-loader-round-004b46cbdbf5c291cff9332ee40126c64fefef0921f0d04ea936b275b278fbf4.gif&quot;},&quot;superbadgeSet&quot;:null,&quot;trailmixes&quot;:[],&quot;trailmixButtonLabels&quot;:{&quot;addToTrailmix&quot;:&quot;Add to Trailmix&quot;}}" data-hydrate="t" data-react-cache-id="ModuleHeader-0"><div class="tds-content-header slds-text-body_small tds-color_meteorite slds-is-relative tds-box-shadow_small"><div class="slds-grid slds-grid_vertical-align-center" style="height:5rem;background-color:#02928b"><div class="slds-grid slds-grid_align-spread slds-container_center slds-container_x-large slds-p-horizontal_large slds-grow"><div style="margin-bottom:-3.6rem"><div><div aria-hidden="true" tabindex="-1" class="slds-is-relative slds-show_inline-block"><img src="https://res.cloudinary.com/hy4kyit2a/f_auto,fl_lossy,q_70/learn/superbadges/superbadge_aap/dcfd3a2d114b5954ea59f2b2cd061121_badge.png" alt="" style="height:90px;width:90px"/><div style="position:absolute;bottom:-0.25rem;right:-0.75rem;border:3px solid white;border-radius:100%"><span class="slds-icon_container slds-show slds-icon_container_circle tds-bg_meteorite"><svg aria-hidden="true" class="tds-fill_white slds-icon slds-icon_x-small slds-icon-text-default"><use href="/packs/media/svg/symbols-857bab0e.svg#lock"></use></svg><span class="slds-assistive-text">locked</span></span></div></div></div></div><div class="slds-grid"></div></div></div><div class="slds-container_center slds-container_x-large slds-p-horizontal_large slds-p-top_large"><div class="slds-float_right slds-text-align_right slds-m-left_small"><div class=""><div class="slds-m-bottom_small"><span class="tds-badge slds-badge slds-grid_vertical-align-center">+16,000 points</span></div></div></div><div style="margin-top:1.25rem"><div class="slds-m-bottom_medium"><div>Superbadge</div><h1 class="tds-color_black slds-text-heading_large slds-hyphenate tds-text_bold slds-m-bottom_xx-small">Advanced Apex Specialist</h1><p>Build complex business logic using advanced Apex and Visualforce programming techniques.</p></div></div><div class="slds-grid slds-p-bottom_large"><div class="slds-grow tds-content__buttons"><div class="slds-grid"><div class="slds-m-right_xx-small"><button class="slds-button slds-button_icon tds-button_icon slds-button_icon tds-button_icon th-accessible-button_icon tds-button_icon-medium slds-button_icon-border-filled" title="Add to Favorites" type="button" aria-label="Add to Favorites"><svg aria-hidden="true" class="slds-button__icon tds-button__icon"><use href="/packs/media/icons/trailhead-sprite/svg/symbols-4b78b1c926d8187119e8a218e7c51907.svg#star-outline"></use></svg><span class="slds-assistive-text">Add to Favorites</span></button></div><div class="slds-m-right_xx-small"><button class="slds-button slds-button_icon tds-button_icon slds-button_icon tds-button_icon slds-button_neutral tds-color_meteorite th-accessible-button_icon tds-button_icon-medium slds-button_icon-border-filled" title="Add to Trailmix" type="button"><svg aria-hidden="true" class="slds-button__icon tds-button__icon"><use href="/packs/media/svg/symbols-857bab0e.svg#add"></use></svg><span class="slds-assistive-text">Add to Trailmix</span></button></div></div></div><div class="slds-grow-none slds-grid slds-grid_vertical-align-center slds-text-align_right"><span>~16 hrs</span></div></div></div></div></div>
<div class='tds-bg_sand slds-p-horizontal_x-large slds-p-bottom_x-large'>
<div class='slds-container_medium slds-container_center'>
<div data-react-class="superbadges/SuperbadgeProgressContainer" data-react-props="{&quot;content&quot;:{&quot;apiName&quot;:&quot;superbadge_aap&quot;,&quot;color&quot;:&quot;#02928b&quot;,&quot;contentUid&quot;:&quot;0260fdbe-0860-8c2a-76d0-4f8e948a1655&quot;,&quot;description&quot;:&quot;Build complex business logic using advanced Apex and Visualforce programming techniques.&quot;,&quot;image&quot;:&quot;https://res.cloudinary.com/hy4kyit2a/f_auto,fl_lossy,q_70/learn/superbadges/superbadge_aap/dcfd3a2d114b5954ea59f2b2cd061121_badge.png&quot;,&quot;points&quot;:&quot;16,000&quot;,&quot;title&quot;:&quot;Advanced Apex Specialist&quot;,&quot;subTitle&quot;:&quot;Superbadge&quot;,&quot;type&quot;:&quot;superbadge&quot;,&quot;estimatedTime&quot;:&quot;~16 hrs&quot;,&quot;unitCount&quot;:9,&quot;path&quot;:&quot;https://trailhead.salesforce.com/content/learn/superbadges/superbadge_aap&quot;,&quot;private&quot;:false,&quot;preview&quot;:null,&quot;tags&quot;:null},&quot;labels&quot;:{&quot;title&quot;:&quot;Prerequisites&quot;,&quot;unlockSuperbadge&quot;:&quot;Complete this badge to unlock Superbadge&quot;},&quot;assetPaths&quot;:{&quot;loader&quot;:&quot;/assets/ajax-loader-round-004b46cbdbf5c291cff9332ee40126c64fefef0921f0d04ea936b275b278fbf4.gif&quot;},&quot;superbadgeSet&quot;:null,&quot;modules&quot;:[{&quot;content&quot;:{&quot;apiName&quot;:&quot;superbadge_apex&quot;,&quot;description&quot;:&quot;Use integration and business logic to push your Apex coding skills to the limit.&quot;,&quot;image&quot;:&quot;https://res.cloudinary.com/hy4kyit2a/f_auto,fl_lossy,q_70/learn/superbadges/superbadge_apex/2d3426c48dc056fd5c083ecb5cb66a56_badge.png&quot;,&quot;title&quot;:&quot;Apex Specialist&quot;,&quot;type&quot;:&quot;superbadge&quot;,&quot;path&quot;:&quot;https://trailhead.salesforce.com/content/learn/superbadges/superbadge_apex&quot;}},{&quot;content&quot;:{&quot;apiName&quot;:&quot;superbadge_integration&quot;,&quot;description&quot;:&quot;Demonstrate your integration skills by synchronizing external data systems and Salesforce.&quot;,&quot;image&quot;:&quot;https://res.cloudinary.com/hy4kyit2a/f_auto,fl_lossy,q_70/learn/superbadges/superbadge_integration/109b07c27bdad837c3c0776db69650c1_badge.png&quot;,&quot;title&quot;:&quot;Data Integration Specialist&quot;,&quot;type&quot;:&quot;superbadge&quot;,&quot;path&quot;:&quot;https://trailhead.salesforce.com/content/learn/superbadges/superbadge_integration&quot;}}],&quot;className&quot;:&quot;tds-dotted-trail&quot;}" data-hydrate="t" data-react-cache-id="superbadges/SuperbadgeProgressContainer-0"><div class="tds-dotted-trail" data-reactroot=""><div><div class="tds-box-shadow_small tds-bg_white slds-p-around_x-large tds-border-radius_medium"><h2 class="tds-text-size_8 tds-text_bold slds-p-bottom_medium">Prerequisites</h2><div class=""><div class=" " data-test="sb_progress-prerequisite_superbadge_apex_in-progress"><div class="slds-tooltip-trigger tds-display_block" style="display:inline-block;line-height:1"><a href="https://trailhead.salesforce.com/content/learn/superbadges/superbadge_apex"><div class="slds-grid slds-grid_vertical-align-center tds-progress-icon"><div style="background:linear-gradient(
    to bottom,
    white 0%,
    white 50%,
    transparent 50%,
    transparent 100%
  )
, 
  linear-gradient(
    to right,
    white,
    white 46%,
    #02928b 46%,
    #02928b 54%,
    white 54%,
    white
  );padding-bottom:1rem" class="slds-m-right_small slds-shrink-none"><div style="border:2px solid #02928b;background-color:#02928b" class="tds-border-radius_round slds-p-around_xx-small tds-progress-icon__background slds-show_inline-block"><div><div aria-hidden="true" tabindex="-1" class="slds-is-relative slds-show_inline-block"><img src="https://res.cloudinary.com/hy4kyit2a/f_auto,fl_lossy,q_70/learn/superbadges/superbadge_apex/2d3426c48dc056fd5c083ecb5cb66a56_badge.png" alt="" style="height:60px;width:60px"/></div></div></div></div><div class="slds-m-around_xx-small tds-progress-icon__title slds-p-bottom_medium">Apex Specialist</div></div></a><span></span></div></div><div class=" " data-test="sb_progress-prerequisite_superbadge_integration_in-progress"><div class="slds-tooltip-trigger tds-display_block" style="display:inline-block;line-height:1"><a href="https://trailhead.salesforce.com/content/learn/superbadges/superbadge_integration"><div class="slds-grid slds-grid_vertical-align-center tds-progress-icon"><div style="background:linear-gradient(
    to right,
    white,
    white 46%,
    #02928b 46%,
    #02928b 54%,
    white 54%,
    white
  );padding:1rem 0" class="slds-m-right_small slds-shrink-none"><div style="border:2px solid #02928b;background-color:#02928b" class="tds-border-radius_round slds-p-around_xx-small tds-progress-icon__background slds-show_inline-block"><div><div aria-hidden="true" tabindex="-1" class="slds-is-relative slds-show_inline-block"><img src="https://res.cloudinary.com/hy4kyit2a/f_auto,fl_lossy,q_70/learn/superbadges/superbadge_integration/109b07c27bdad837c3c0776db69650c1_badge.png" alt="" style="height:60px;width:60px"/></div></div></div></div><div class="slds-m-around_xx-small tds-progress-icon__title">Data Integration Specialist</div></div></a><span></span></div></div><div class="" data-test="sb_progress-superbadge_superbadge_aap_locked"><div class="slds-grid slds-grid_vertical-align-center tds-progress-icon"><div style="background:linear-gradient(
    to top,
    white 0%,
    white 50%,
    transparent 50%,
    transparent 100%
  )
, 
  linear-gradient(
    to right,
    white,
    white 46%,
    #02928b 46%,
    #02928b 54%,
    white 54%,
    white
  );padding-top:1rem" class="slds-m-right_small slds-shrink-none"><div style="border:2px solid #02928b;background-color:#02928b" class="tds-border-radius_round slds-p-around_xx-small tds-progress-icon__background slds-show_inline-block"><div><div aria-hidden="true" tabindex="-1" class="slds-is-relative slds-show_inline-block"><img src="https://res.cloudinary.com/hy4kyit2a/f_auto,fl_lossy,q_70/learn/superbadges/superbadge_aap/dcfd3a2d114b5954ea59f2b2cd061121_badge.png" alt="" style="height:60px;width:60px"/></div></div></div></div><div class="slds-m-around_xx-small tds-progress-icon__title slds-p-top_medium">Advanced Apex Specialist</div></div></div></div></div></div></div></div>
</div>
<div class='slds-container_medium slds-container_center tds-dotted-trail'>
<div class='slds-p-top_x-large tds-box-shadow_small tds-bg_white tds-border-radius_medium'>
<div class='th-unit-content slds-p-horizontal_x-large'>
<div class='slds-m-bottom_x-large'>
<h2 class='tds-text-size_8 tds-text_bold'>Advanced Apex Specialist</h2>
</div>
<div class='slds-m-bottom_x-large'>
<h3 class='tds-text-size_7 tds-text_bold'>
What You&#39;ll Be Doing to Earn This Superbadge
</h3>
<ol><li><span style="color: rgb(0, 0, 0); background-color: transparent;">Debug and troubleshoot Apex code</span></li><li><span style="color: rgb(0, 0, 0); background-color: transparent;">Develop Apex Code that will scale to large data sets</span></li><li><span style="color: rgb(0, 0, 0); background-color: transparent;">Develop custom interfaces using Visualforce</span></li><li><span style="color: rgb(0, 0, 0); background-color: transparent;">Design a test strategy that will ensure quality of code</span></li></ol>

</div>
<div class='slds-m-bottom_x-large'>
<h3 class='tds-text-size_7 tds-text_bold'>
Concepts Tested in This Superbadge
</h3>
<ul><li>Custom metadata in Apex Code</li><li>Apex sharing</li><li>Apex transaction execution</li><li>Aggregate SOQL queries</li><li>Complex SOQL queries</li><li>ConnectAPI namespace</li><li>Visualforce development</li><li>Data binding with Apex classes in Visualforce</li><li>Visualforce performance optimization</li><li>Code refactoring and reusability</li><li>Usage of constants and labels</li><li>Testing Apex and Visualforce</li><li>Troubleshooting Apex</li></ul>

</div>
<div class='th-unit-content__scenario'>
<div class="box message info" style="background: #fffcdd;">
  <div class="inner" style="display: block; font-size: 1rem; line-height: 1.5;">
    <div class="bd" style="display: block;">
      <div class="media" style="overflow: hidden; display: block; line-height: 1.5;">
        <img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif" alt="Note" style="float: left;margin: 1rem 1rem 0 1rem;height: auto;vertical-align: middle;max-width: 100px;line-height: 1.5;">
        <div class="mediaBd" style="float: none; padding-left: 65px;">
          <h4 class="mbs">
<a id="note" class="anchor" href="#note" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a id="note" class="anchor" href="#note" aria-hidden="true"><span class="octicon octicon-link"></span></a>Note</h4>
          <div class="message-media-content" style="padding-left: 0.5rem; padding-right: 4rem;">
             <p>Before you begin the challenges, please review <a href="https://trailhead.salesforce.com/help?article=Advanced-Apex-Specialist-Superbadge-Trailhead-Challenge-Help"><i>Advanced Apex Specialist: Trailhead Challenge Help</i></a>. 
          <p>Review the <a target="_blank" href="https://trailhead.salesforce.com/help?article=Superbadge-Challenge-Help">help article relating to superbadge challenges</a> for more information about credential security.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<h3>
<a id="prework-and-notes" class="anchor" href="#prework-and-notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prework and Notes</h3>

<ul>
<li><p>You’ll probably want to jot down notes as you read the requirements (unless you have a photographic memory). So grab a pen and paper (or electronic alternative) now.</p></li>
<li><p>Create a new Trailhead Playground for this Superbadge. If you use an existing org, you might have trouble validating the challenges.</p></li>
<li><p>Install this <a href="https://login.salesforce.com/packaging/installPackage.apexp?p0=04tf4000001O5si">unmanaged Superbadge package</a> (package ID:  04tf4000001O5si). This package contains the schema and code needed to complete the challenges. If you have trouble installing a managed or unmanaged package or app from AppExchange, follow the steps in the <a href="https://trailhead.salesforce.com/modules/trailhead_playground_management">Trailhead Playground Management</a> module.</p></li>
<li><p>Review the <a href="https://developer.salesforce.com/docs/atlas.en-us.object_reference.meta/object_reference/sforce_api_erd_products.htm">Product and Schedule Objects ERD</a></p></li>
<li><p>Update the Product Family field on the Product2 sObject to only have the following values: Entree, Side, Dessert, Beverage</p></li>
<li><p>Update the Product page layout to include the Initial Inventory, Quantity Ordered, and Quantity Remaining fields</p></li>
<li><p>Update the Account page layout "Account page layout" to display the Orders related list.</p></li>
<li><p>Remove the Contract Number field from the Order page layout if it is currently there </p></li>
<li><p>Use the methods provided in the unmanaged package without changing their name or signature unless explicitly mentioned in the requirements below.</p></li>
</ul>

<h3>
<a id="use-case" class="anchor" href="#use-case" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use Case</h3>

<p>When Renee LaFleur was in culinary school, she interned with one of the world’s most esteemed chefs, who’s renowned for his gourmet food truck with outdoor pop-up seating. Upon graduation, this experience inspired Renee to start her own food truck business: New Millennium Food Truck—a small food operation serving up big flavors.</p>

<p>After a few years of hard work and long hours, Renee grew her business from one to five food trucks. This success has allowed her to raise capital to pursue a passion project: a business in the  "pay-it-forward" model. Remembering how hard it was to get started, she wants to use her new business to provide new chefs an easier way to establish their customer base.</p>

<p>Renee created New Millennium Delivery to allow new and emerging chefs to make a name for themselves by giving them a low-cost platform to peddle their food to the public. In return, their customers can order meals over the phone. A New Millennium Delivery representative then delivers the order and takes the happy customer’s photo, which is then provided to the chef for social media posts. </p>

<p>Salesforce’s platform, including Apex and Visualforce, is the technology that drives New Millennium Delivery’s business. Previously, Renee had hired a developer to help her build her Salesforce application. Now, you’re the lucky developer who’s picking up where the previous developer left off.</p>

<p>Renee requested that the previous developer create the initial version of the application in just a few short weeks in order to so it could debut at a local food and wine festival. Renee knew she was forfeiting "good" for “fast” when she put her developer on such a tight timeline, and corners were cut and best practices sometimes ignored. Ignoring those best practices affected the rest of the development process—Renee wants you to fix this. </p>

<p>She’s asked you to review and understand the legacy code in the current application, and then implement code fixes and new functionality using best practices for programming and application design.</p>

<h4>
<a id="standard-objects" class="anchor" href="#standard-objects" aria-hidden="true"><span class="octicon octicon-link"></span></a>Standard Objects</h4>

<p>New Millennium Delivery stores its data in standard Salesforce objects, including:</p>

<ul>
<li><p><strong>Accounts</strong>— New Millennium Delivery's customers who order food</p></li>
<li><p><strong>Products</strong>—The different meal items available for purchase</p></li>
<li><p><strong>Pricebook Entries</strong>— The prices of meal items</p></li>
<li><p><strong>Orders</strong>— Orders for meals to be delivered</p></li>
<li><p><strong>Order Items</strong>— Products included in a customer’s order</p></li>
</ul>

<p>If you are not familiar with the data model for standard objects related to Product, review it <a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_erd_products.htm">here</a>.</p>

<p>Note that the New Millennium Delivery’s business logic doesn’t necessitate any new custom fields, relationships, or custom objects. </p>

<h3>
<a id="business-requirements" class="anchor" href="#business-requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Business Requirements</h3>

<h4>
<a id="preliminary-test-data" class="anchor" href="#preliminary-test-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Preliminary Test Data</h4>

<p>After you complete Challenge 1, review the following New Millenium Delivery Products that will be created for you in your Trailhead playground.</p>

<table>
  <tr>
    <th scope="col">Product Name</th>
    <th scope="col">Product Family</th>
    <th scope="col">Initial Inventory</th>
    <th scope="col">Quantity Ordered</th>
    <th scope="col">Active</th>
    <th scope="col">Standard Price</th>
  </tr>
  <tr>
    <td>Pizza</td>
    <td>Entree</td>
    <td>25</td>
    <td>0</td>
    <td>true</td>
    <td>$20.00</td>
  </tr>
  <tr>
    <td>Garlic Bread</td>
    <td>Side</td>
    <td>20</td>
    <td>0</td>
    <td>true</td>
    <td>$6.00</td>
  </tr>
  <tr>
    <td>Chocolate Cake</td>
    <td>Dessert</td>
    <td>15</td>
    <td>0</td>
    <td>true</td>
    <td>$5.00</td>
  </tr>
  <tr>
    <td>Coconut Water</td>
    <td>Beverage</td>
    <td>10</td>
    <td>0</td>
    <td>true</td>
    <td>$3.00</td>
  </tr>
  <tr>
    <td>Hamburger</td>
    <td>Entree</td>
    <td>25</td>
    <td>0</td>
    <td>true</td>
    <td>$20.00</td>
  </tr>
  <tr>
    <td>French Fries</td>
    <td>Side</td>
    <td>20</td>
    <td>0</td>
    <td>true</td>
    <td>$6.00</td>
  </tr>
  <tr>
    <td>Carrot Cake</td>
    <td>Dessert</td>
    <td>15</td>
    <td>0</td>
    <td>true</td>
    <td>$5.00</td>
  </tr>
  <tr>
    <td>Lemonade</td>
    <td>Beverage</td>
    <td>10</td>
    <td>0</td>
    <td>true</td>
    <td>$3.00</td>
  </tr>
  <tr>
    <td>Hot Dog</td>
    <td>Entree</td>
    <td>25</td>
    <td>0</td>
    <td>true</td>
    <td>$10.00</td>
  </tr>
  <tr>
    <td>Onion Rings</td>
    <td>Side</td>
    <td>20</td>
    <td>0</td>
    <td>true</td>
    <td>$6.00</td>
  </tr>
  <tr>
    <td>Jello</td>
    <td>Dessert</td>
    <td>15</td>
    <td>0</td>
    <td>true</td>
    <td>$2.50</td>
  </tr>
  <tr>
    <td>Iced Tea</td>
    <td>Beverage</td>
    <td>10</td>
    <td>0</td>
    <td>true</td>
    <td>$3.00</td>
  </tr>
</table>

<h4>
<a id="use-constants-to-store-data" class="anchor" href="#use-constants-to-store-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use Constants to Store Data</h4>

<p>At Dreamforce, you learned that an application can be made more efficient with the best practice of using constants to store data whose value can change over time, but whose purpose remains constant. You want to implement this best practice by creating constants. A few of these constants will take advantage of custom labels.</p>

<p>As a reminder you should have already modified the Product Family picklist to only have the following active values:</p>

<p>Entree, Side, Dessert, Beverage</p>

<p>Create two custom labels with the following attributes: </p>

<table>
  <tr>
    <th scope="col">Short Description </th>
    <th scope="col">Name</th>
    <th scope="col">Categories</th>
    <th scope="col">Value</th>
    <th scope="col">Protected Component</th>
  </tr>
  <tr>
    <td>Select One </td>
    <td>Select_One </td>
    <td>constants </td>
    <td>Select one</td>
    <td>Unchecked</td>
  </tr>
  <tr>
    <td>Inventory Level Low</td>
    <td>Inventory_Level_Low</td>
    <td>constants</td>
    <td>Has a low inventory</td>
    <td>Unchecked</td>
  </tr>
</table>

<p>Note: If you make a mistake when first creating a label, we recommend deleting it and recreating it from scratch.</p>

<p>Create an Apex class named <code>Constants</code>, defining the following constants. </p>

<table>
  <tr>
    <th scope="col">Name</th>
    <th scope="col">Value</th>
    <th scope="col">Purpose</th>
  </tr>
  <tr>
    <td>DEFAULT_ROWS</td>
    <td>5</td>
    <td>An Integer used to control the number of rows displayed by a Visualforce page.</td>
  </tr>
  <tr>
    <td>SELECT_ONE</td>
    <td>Value of the corresponding custom label</td>
    <td>A String used to populate picklist values in Visualforce Pages.</td>
  </tr>
  <tr>
    <td>INVENTORY_LEVEL_LOW</td>
    <td>Value of the corresponding custom label</td>
    <td>A String used to determine the threshold that causes low inventory alerts.</td>
  </tr>
  <tr>
    <td>PRODUCT_FAMILY</td>
    <td>List of Schema.PicklistEntry for the Family field on the Product2 object. This list is dynamic and must always reflect the currently configured values.</td>
    <td>A list used to populate picklist values in Visualforce pages.</td>
  </tr>
  <tr>
    <td>DRAFT_ORDER_STATUS</td>
    <td>Draft</td>
    <td>A String used to indicate that an order is a “draft”—an order that is in flight.

You can’t activate a draft order unless you have a line item, and you can’t have a line item unless you have an order saved in the system.</td>
  </tr>
  <tr>
    <td>ACTIVATED_ORDER_STATUS</td>
    <td>Activated</td>
    <td>A String used to evaluate if an Order is Activated or not.</td>
  </tr>
  <tr>
    <td>INVENTORY_ANNOUNCEMENTS</td>
    <td>Inventory Announcements</td>
    <td>A String used to query a Chatter Group by Name.</td>
  </tr>
  <tr>
    <td>ERROR_MESSAGE</td>
    <td>An error has occurred, please take a screenshot with the URL and send it to IT.</td>
    <td>A String used to display user friendly error messages on Visualforce pages.</td>
  </tr>
  <tr>
    <td>STANDARD_PRICEBOOK_ID</td>
    <td>Hardcoded value of the Standard Pricebook Id</td>
    <td>An Id used to create Orders and PricebookEntries in business and test code. 

Note: Normally, we would recommend doing a query and using <code>Test.getStandardPricebookId()</code> to get the standard pricebook Id, however, since this code is being used for both business and test logic, that’s not possible.  In fact, just calling  <code>Test.getStandardPricebookId()</code> from outside of a test method will throw a system exception.  That would make it very hard on us to ensure that you completed this step properly.</td>
  </tr>
</table>

<h4>
<a id="use-custom-metadata-types" class="anchor" href="#use-custom-metadata-types" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use Custom Metadata Types</h4>

<p>Inventory managers told Renee they want to know when inventory is starting to run low. For instance, if there are only 15 of a type of dessert left in inventory, they want to be alerted. That is, once the inventory level of a particular product has dwindled down to the threshold of the product’s associated Product Family, they want a notification. </p>

<p>Based on an analysis of the last few months of order data, Renee has determined the inventory threshold values for each of the Product Families. She wants to store the inventory threshold value for each Product Family, but she wants to easily modify these thresholds as sales continue to grow. After careful consideration, you determine that a custom metadata type fits the bill for meeting these requirements.</p>

<p>Create a custom metadata type with the following attributes. </p>

<table>
  <tr>
    <th scope="col">Field</th>
    <th scope="col">Value</th>
  </tr>
  <tr>
    <td>Singular Label</td>
    <td>Inventory Setting</td>
  </tr>
  <tr>
    <td>Plural Label</td>
    <td>Inventory Settings</td>
  </tr>
  <tr>
    <td>Object Name</td>
    <td>Inventory_Setting</td>
  </tr>
</table>

<p>Next, create a new field on the new metadata type.</p>

<table>
  <tr>
    <th scope="col">Field</th>
    <th scope="col">Value</th>
  </tr>
  <tr>
    <td>Type</td>
    <td>Number</td>
  </tr>
  <tr>
    <td>Field Label </td>
    <td>Low Quantity Alert</td>
  </tr>
  <tr>
    <td>Length</td>
    <td>18</td>
  </tr>
  <tr>
    <td>Decimal Places</td>
    <td>0</td>
  </tr>
  <tr>
    <td>Field Name</td>
    <td>Low_Quantity_Alert</td>
  </tr>
</table>

<p>Manage Inventory Settings to create the following custom metadata records. </p>

<table>
  <tr>
    <th scope="col">Label</th>
    <th scope="col">Low Quantity Alert</th>
  </tr>
  <tr>
    <td>Entree</td>
    <td>20</td>
  </tr>
  <tr>
    <td>Side</td>
    <td>10</td>
  </tr>
  <tr>
    <td>Dessert</td>
    <td>15</td>
  </tr>
  <tr>
    <td>Beverage</td>
    <td>5</td>
  </tr>
</table>

<h4>
<a id="correctly-calculate-inventory-quantities" class="anchor" href="#correctly-calculate-inventory-quantities" aria-hidden="true"><span class="octicon octicon-link"></span></a>Correctly Calculate Inventory Quantities</h4>

<p>From speaking to Sam, a sales rep, Renee learned that there are issues entering new customer orders. Sam mentioned the following issues: </p>

<p>1) The value of the Quantity Ordered field isn’t accurate</p>

<p>2) Saving a new order is often impossible because of system errors </p>

<p>3) Draft orders—orders that are in-flight but not yet activated—decrement available inventory prematurely.</p>

<p>After investigating the issues that Sam raised, you’ve made notes on resolving these issues:</p>

<ul>
<li><p>The business logic to derive the value of the Quantity Ordered field is not only faulty, it’s also inefficient. The system should make the calculation efficiently using lean code, and correctly aggregate the Quantity Ordered.</p></li>
<li><p>Sam correctly identified that draft orders prematurely decrement inventory levels. You can see that the previous developer tried to fix this, but then never finished. Now, you need to fix the business logic such that only successfully activated orders impact inventory levels.</p></li>
<li><p>The logic to determine the value of the Quantity Ordered field should be updated to take into account all activated orders that are in the system, not just the orders visible to a single sales representative.</p></li>
<li><p>The <code>OrderTrigger</code> should be updated to follow Apex Trigger best practices. This ensures that the business logic is modular and reusable. Additionally, the trigger definition should list only the necessary trigger events.</p></li>
</ul>

<p>Note: Normally this logic would apply on Update, Delete, and Undelete, and handle status changes back to Draft but in the interest of time and not making you perform repetitive tasks, we only focus on Update.</p>

<h4>
<a id="correct-the-visualforce-page-that-allows-the-addition-of-products-and-pricebook-entries" class="anchor" href="#correct-the-visualforce-page-that-allows-the-addition-of-products-and-pricebook-entries" aria-hidden="true"><span class="octicon octicon-link"></span></a>Correct the Visualforce Page That Allows the Addition of Products and Pricebook Entries</h4>

<p>Renee’s previous programmer created the <code>Product2New</code> Visualforce page. The intention of this page is to allow an inventory manager to rapidly enter, at once, multiple new Products and related PricebookEntry records. However, inventory managers have provided feedback that the page slows down data entry and doesn’t give them all the information they need or want. </p>

<p>To resolve this, you need to implement an override of the standard <strong>Add</strong> and <strong>New</strong> buttons on the Product object with an updated version of <code>Product2New</code>. </p>

<p>The updated page should allow an inventory manager to create multiple products at once and enter an associated Unit Price for each product. Then, when the inventory manager clicks the <strong>Save</strong> button, the result in the system is that for each product entered, a related PriceBookEntry for the Standard Pricebook is created. Only entries on the page that have all fields populated should be saved; other entries shouldn’t be saved. If an error occurs during save, a savepoint should be rolled back and a friendly error message should be displayed on the screen. Note that inventory managers should be able to enter as many products as they need to, and should be able to add multiple rows to the table with each click of the page’s Add button.</p>

<p>Renee doesn’t want to modify the <code>Product2New</code> page or the <code>Product2Extension</code> class when business requirements change in the future. To meet this need:</p>

<ul>
<li><p>Update the Visualforce page so that each column header displays the current field label.</p></li>
<li><p>Update the Apex class such that the <code>AddRows</code> method uses the DEFAULT_ROWS constant.  </p></li>
<li><p>Create a new method named <code>GetFamilyOptions</code> for use by the <strong>Family</strong> picklist on the page. The <code>GetFamilyOptions</code> method should use both the SELECT_ONE and PRODUCT_FAMILY constants to generate the picklist options.</p></li>
</ul>

<p>Because you want the Product and PriceBookEntry records to be associated with each other, implement and use an inner class named <code>ProductWrapper</code>, with the following attributes:</p>

<ul>
<li><p><strong>productRecord</strong> of type <strong>Product2</strong></p></li>
<li><p><strong>pricebookEntryRecord</strong> of type <strong>PriceBookEntry</strong></p></li>
</ul>

<p>Ensure current references to the list of Products are replaced with references to a list of <code>ProductWrapper</code>. </p>

<p>Inventory managers try to balance supply and demand for New Millennium Delivery’s products. They requested that a horizontal bar chart be added to the Visualforce page. They want the chart to show them the Quantity Remaining of each Product Family. When a manager clicks <strong>Add</strong>, the chart should re-render performantly.</p>

<p>Because this chart data is useful for other purposes, it is generated from its own Apex Class named <code>ChartHelper</code>. Update <code>ChartHelper</code> to ensure the code inside always runs as the system.  Complete the <code>GetInventory</code> method in <code>ChartHelper</code> to correctly calculate the aggregate of active products that have a positive Quantity Remaining, ensuring that the result is correct for all users. Renee wants this method to also be available for use by Lightning Components.</p>

<h4>
<a id="generate-a-test-data-factory" class="anchor" href="#generate-a-test-data-factory" aria-hidden="true"><span class="octicon octicon-link"></span></a>Generate a Test Data Factory</h4>

<p>After some investigation, you determine that the previous programmer had decided to modularly and efficiently generate test data for unit tests, using the <code>TestDataFactory</code> class. However, you also notice that the class isn’t finished—it has method names but no actual logic. Complete the <code>TestDataFactory</code> class so that it provides an efficient way to model sample business data that can be applied to the application’s unit tests.  Ensure that each method can be used as a utility method from your test classes and also that they never depend on the value of any instance member variables.</p>

<p>Note: Normally, we’d use the <code>@isTest</code> annotation on the <code>TestDataFactory</code> class, but then you couldn't call the methods from your business logic and we couldn't call the methods to ensure they work properly.</p>

<h4>
<a id="create-unit-tests-for-ordertrigger-and-product2extension" class="anchor" href="#create-unit-tests-for-ordertrigger-and-product2extension" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create Unit Tests for <strong>orderTrigger</strong> and <strong>product2Extension</strong>
</h4>

<p>The more recent Apex and Visualforce code implemented by the previous developer doesn’t have the minimal required test coverage, and therefore can’t be deployed. You’re a seasoned developer, and you know that all code must be tested thoroughly. Renee has asked you to ensure that each method has the minimum 75% code coverage required to be deployed, and that new and existing unit tests do not use actual customer data.  After reviewing the legacy unit tests, you notice you can use the existing <code>Product2Tests</code> Apex class to test <code>Product2Extension</code>, and you can use the existing <code>OrderTests</code> Apex class to test <code>OrderTrigger</code> and its helper.</p>

<h4>
<a id="validate-the-logic-of-ordertrigger" class="anchor" href="#validate-the-logic-of-ordertrigger" aria-hidden="true"><span class="octicon octicon-link"></span></a>Validate the Logic of orderTrigger</h4>

<p>First, create a method that can be used by test methods to verify that the <strong>Quantity Ordered</strong> field is correctly updated on Products when Orders are activated. Go back to the <code>TestDataFactory</code> Apex class and create a new method with the following signature:</p>

<pre><code>VerifyQuantityOrdered(Product2 originalProduct, Product2 updatedProduct, Integer qtyOrdered)
</code></pre>

<p>This method should perform an assertion that verifies that updatedProduct's <strong>Quantity_Ordered__c</strong> field is equal to the sum of the originalProduct's <strong>Quantity_Ordered__c</strong> field and the value of qtyOrdered.</p>

<p>Next, go back to the orderTests class and ensure its test methods don’t (and can’t) use live data. Create a new method named <code>SetupTestData</code> that is will be used to generate test data for all the unit tests in <code>OrderTests</code>. This method should just call the <code>InsertTestData</code> method in the <code>TestDataFactory</code> class.</p>

<p>Finally, create a new test method named <code>OrderUpdate_UnitTest</code> in <code>OrderTests</code>. This method must activate the Orders created in your <code>SetupTestData</code> method using the ACTIVATED_ORDER_STATUS constant and then use the <code>VerifyQuantityOrdered</code> method to verify that the Quantity Ordered field on Products was increased by the trigger.</p>

<p>Note: A method like <strong>VerifyQuantityOrdered</strong> can be useful to ensure logic is tested consistently across all your unit tests.  It also makes it a lot easier for us to assess that you completed this challenge properly!  As your codebase grows, you may create more of these types of methods.  If so, you would want to move them into a different class than the <code>TestDataFactory</code>.</p>

<h4>
<a id="validate-the-logic-of-the-product2new-page" class="anchor" href="#validate-the-logic-of-the-product2new-page" aria-hidden="true"><span class="octicon octicon-link"></span></a>Validate the Logic of the product2New Page</h4>

<p>Complete the <code>Product2Extension_UnitTest</code> in <code>Product2Tests</code>. This unit test should simulate a user’s visit to, and interaction with, the <code>Product2New</code> page and test that it behaves as expected. When a user first visits the page, there should be multiple rows displayed on the screen. Assert that the size of the <strong>productsToInsert</strong> list is equal to the DEFAULT_ROWS constant.  When the Add button is clicked, an additional set of rows should be added, so assert that the size of the <strong>productsToInsert ** list is double **DEFAULT_ROWS</strong> after the button is clicked once.  Don't forget to ensure that the test methods don’t (and can’t) use live data. </p>

<p>Next, test the Save button. Verify that populated rows are saved and unpopulated rows are not saved. Loop through the rows in the <strong>productsToInsert</strong> list and populate the values of the first 5 records, and then simulate clicking the Save button. Verify that the button worked by asserting that only 5 products were saved.</p>

<p>Be sure to run your tests when you're done to ensure they pass without failures.</p>

<h4>
<a id="automate-internal-announcements-when-inventory-is-low" class="anchor" href="#automate-internal-announcements-when-inventory-is-low" aria-hidden="true"><span class="octicon octicon-link"></span></a>Automate Internal Announcements When Inventory Is Low</h4>

<p>The staff at New Millennium Delivery needs to be aware of any inventory that is running low. The previous developer had unsuccessfully attempted to do this.  Renee wants you to fix the issues in the previous developer’s logic and ensure that all appropriate employees can choose to be notified, and not just those following a given product.</p>

<p>You’ve determined that a Chatter group is an easy way for employees to opt-into receiving these notifications. Start by creating a Chatter group named <strong>Inventory Announcements</strong> and give the group this description: This group is for New Millennium Delivery employees to receive inventory announcements.  Be sure to create the group so that it wont be automatically archived and that it will be accessible by all users.</p>

<p>After reading about the <strong>ConnectAPI</strong>, you realize that a Chatter Announcement is a better fit than a FeedItem post because an announcement acts more like an alert, in that it is timely and it expires. You know that a low inventory value should prompt an announcement to be posted to the Inventory Announcements Chatter group, so an Apex trigger must be used. After reviewing the legacy code, you realize the previous programmer attempted to write this business logic in the <code>Product2Trigger</code>, but that logic is faulty.</p>

<p>Posts count as DML operations, so you will need to implement the Queueable interface to ensure that a bulk operation will result in all announcements being posted, including in the event that a large volume of announcements need to be posted. Your predecessor found some code on the Salesforce Developer Forum and created the legacy <code>AnnouncementQueueable</code> Apex class. Use this class to get started. The <code>AnnouncementQueueable</code> and <code>Product2Helper</code> classes should use the <strong>ConnectAPI</strong> namespace to automatically post a Chatter Announcement when a product level falls below a given threshold.  </p>

<p>Modify <code>AnnouncementQueueable</code> to implement the Queueable interface and call its postAnnouncements method. Ensure that it requeues itself when it has more Announcements to post than limits allow.</p>

<p>After reviewing the existing code in the product2Helper class, you realize that it too can benefit from your constants class. Modify <code>Product2Helper</code> to use the INVENTORY_ANNOUNCEMENTS constant instead of  "group name" to ensure consistency in the app.</p>

<p>Complete the <code>PostAlerts</code> method in <code>Product2Helper</code> to construct new AnnouncementInputs for the Chatter Group and for use with the <code>AnnouncementQueuable</code> Apex class.</p>

<p>Next, complete the <code>AfterUpdate</code> method so that it uses the <code>PostAlerts</code> method when you determine that a Product’s Quantity_Remaining__c field has dropped below the threshold value captured in the custom metadata records you created previously.</p>

<p>Best practices dictate that business logic code should be stored in Apex classes to make it reusable, easier to test, and easier to debug. Modify <code>Product2Trigger</code> to execute only on the After Update event and call the logic in <code>Product2Helper</code>.</p>

<p>Note: Many developers (including us) prefer to use Test Driven Development and would start with Tests first.  While it works well in the real world, it's not as easy to assess programatically, so stick to doing these challenges in the order provided.  </p>

<h4>
<a id="complete-a-controller-extension-for-a-visualforce-page-to-enable-rapid-order-entry" class="anchor" href="#complete-a-controller-extension-for-a-visualforce-page-to-enable-rapid-order-entry" aria-hidden="true"><span class="octicon octicon-link"></span></a>Complete a Controller Extension for a Visualforce Page to Enable Rapid Order Entry</h4>

<p>New Millennium Delivery’s customers love some foods so much that products frequently sell out quickly. It’s your job to ensure there’s an easy way for inventory managers to determine the food most ordered by each customer so that they can offer the benefit of personalized customer menus.</p>

<p>The employees who take orders at New Millennium Delivery need a page that provides a streamlined process for saving orders and order items. The previous developer created a Visualforce page, <code>OrderEdit</code>, to facilitate this, but was not able to complete its controller extension. </p>

<p><img alt="OrderEdit Visualforce page showing a list of products, Order Pricing Summery pie chart and the order details. " src="https://developer.salesforce.com/files/adv-apex-sb-new-order.png">
Figure 1.1: The OrderEdit Visualforce Page</p>

<p>You need to ensure that this page is used when inventory managers create or edit an Order.  Complete the <code>OrderExtension</code> class to allow the page to show order details, a pie chart summarizing the order items and Order Amount, and a list of active products. </p>

<ol>
<li><p>The pie chart should display a wedge for each item in the order, with the value of the wedge equal to the quantity multiplied by the unit price. Complete the <code>OnFieldChange</code> method to keep track of changes to values in the Quantity or Unit Price fields. This method should also ensure that the data in the pie chart and Order Total reflects these changes and are updated on the screen.</p></li>
<li><p>The Products available for use on the page will be the entire set of all Active Products that Millennium Delivery sells.   Use the <strong>DEFAULT_ROWS</strong> constant to limit the number of rows displayed at one time in the product list.   To help inventory managers find products faster, complete the <code>SelectFamily</code> method so that it limits the Products displayed to only those with the selected Product Family.  Ensure that quantity and unit price values entered are preserved when a user filters Products by Product Family.</p></li>
<li><p>Use the <strong>StandardSetController</strong> methods to complete the pagination methods provided, enabling the user to move through multiple pages of available products.  Ensure that quantity and unit price values entered are preserved when a user paginates. </p></li>
</ol>

<p>Just like she requested with the product2New page, Renee doesn’t want to modify the <code>OrderEdit</code> page or <code>OrderExtension</code> class when business requirements change in the future. Copy the <code>GetFamilyOptions</code> method used in the <code>Product2Extension</code> class to complete the <code>GetFamilyOptions</code> method.</p>

<p>If, at any time, the user clicks the <strong>Cancel</strong> button, none of their changes should be saved.</p>

<p>When the user clicks Save, the Order and Order Items should be saved. Only Order Items with a Quantity greater than zero should be saved; others should not. When editing an existing Order, any Order Items that have been modified to have a Quantity of zero should be deleted. If an error occurs during save, a savepoint should be rolled back and a friendly error message should be displayed on the screen.</p>

<h4>
<a id="create-unit-tests" class="anchor" href="#create-unit-tests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create Unit Tests</h4>

<p>You may recall from the Apex Testing module that testing is the key to successful long-term development and is a critical component of the development process. In addition to being critical for quality assurance, Apex unit tests are also requirements for deploying and distributing Apex. Renee has asked you to create new unit tests.</p>

<ul>
<li><p>Create a new method titled <code>OrderExtension_UnitTest</code> in <code>OrderTests</code> that tests all the methods in the <code>OrderExtension</code> class.  Use the code in <code>Product2Tests</code> as a template.</p></li>
<li><p>Create a new method titled <code>Product2Trigger_UnitTest</code> in <code>Product2Tests</code> that tests the logic when a Product’s Quantity Ordered value is updated. </p></li>
<li><p>Apply best practices and be careful to ensure every test method is using the proper access modifier. Check if they are not unnecessarily being declared as <strong>global</strong> or <strong>public</strong>, when they could be <strong>private</strong>.</p></li>
<li><p>In the Developer Console, clear all test data and then run all tests.</p></li>
<li><p>Ensure you have 75% or higher test coverage on <code>Product2Trigger</code> and <code>OrderTrigger</code> triggers.</p></li>
<li><p>Ensure you have 75% or higher test coverage on <code>Product2Extension</code> and <code>OrderExtension</code> classes.</p></li>
<li><p>Ensure you have 90% or higher coverage on <code>Constants</code>, <code>ChartHelper</code>, <code>Product2Helper</code>, <code>OrderHelper</code>, and <code>TestDataFactory</code> classes.</p></li>
</ul>

<p>Note: Test Coverage is a requirement for deployment and a great way to ensure that your code is not failing.  As discussed in prior badges, the purpose of your Unit Tests is not to acheive a certain percent, but rather to ensure that your business logic behaves as expected.</p>

<p><span style="color:white">ver. 2018-01-04 10:00 am</span></p>

<div class="box message info" style="background: #fffcdd;">
  <div class="inner" style="display: block; font-size: 1rem; line-height: 1.5;">
    <div class="bd" style="display: block;">
      <div class="media" style="overflow: hidden; display: block; line-height: 1.5;">
        <img class="img mtm" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif" alt="Note" style="float: left;margin: 1rem 1rem 0 1rem;height: auto;vertical-align: middle;max-width: 100px;line-height: 1.5;">
        <div class="mediaBd" style="float: none; padding-left: 65px;">
          <h4 class="mbs">
<a id="note" class="anchor" href="#note" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a id="note" class="anchor" href="#note" aria-hidden="true"><span class="octicon octicon-link"></span></a>Note</h4>
          <div class="message-media-content" style="padding-left: 0.5rem; padding-right: 4rem;">
            <p>Before you begin the challenges, please review <a href="https://trailhead.salesforce.com/help?article=Advanced-Apex-Specialist-Superbadge-Trailhead-Challenge-Help"><i>Advanced Apex Specialist: Trailhead Challenge Help</i></a>.           
           <br />
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</div>
</div>

<div class='th-challenge-container slds-m-top_large slds-p-horizontal_x-large'>
<div class='show-if-completed' style='display: none'>
<div class='slds-m-top_large slds-p-around_xx-large slds-text-align_center'>
<h2 class='tds-text-heading_neutraface-x-large'>
Superbadge Complete!
</h2>
<h3 class='tds-text-heading_x-large tds-color_success slds-m-vertical_x-large'><span>+</span><span class='th-challenge-complete__points'>16000 Points</span>
</h3>
</div>

</div>
<div>
<h2 class='tds-text-size_8 tds-text_bold slds-m-bottom_x-small hide-if-completed'>
Ready to Tackle This Superbadge?
</h2>
<div class='slds-p-bottom_x-large hide-if-completed'>
<div class='slds-grid slds-align_absolute-center tds-border-radius_medium tds-bg_sand slds-m-top_large' style='min-height: 25rem'>
<div class='tds-color_meteorite slds-text-align_center' style='max-width: 18rem'>
<div data-react-class="utils/TDSIcon" data-react-props="{&quot;name&quot;:&quot;lock&quot;,&quot;category&quot;:&quot;utility&quot;,&quot;size&quot;:&quot;medium&quot;,&quot;containerClassName&quot;:&quot;slds-icon_container tds-bg_meteorite slds-icon_container_circle slds-p-around_small&quot;,&quot;className&quot;:&quot;tds-fill_white&quot;}" data-react-cache-id="utils/TDSIcon-0"></div>
<p class='slds-m-top_small'>Please first complete the prerequisites and the challenge for Advanced Apex Specialist will be unlocked.</p>
</div>
</div>
</div>

</div>
</div>
<div class='show-if-completed' style='display: none'>
</div>
</div>
</div>
<div data-react-class="ContentEndCap" data-react-props="{&quot;content&quot;:{&quot;apiName&quot;:&quot;superbadge_aap&quot;,&quot;color&quot;:&quot;#02928b&quot;,&quot;contentUid&quot;:&quot;0260fdbe-0860-8c2a-76d0-4f8e948a1655&quot;,&quot;description&quot;:&quot;Build complex business logic using advanced Apex and Visualforce programming techniques.&quot;,&quot;image&quot;:&quot;https://res.cloudinary.com/hy4kyit2a/f_auto,fl_lossy,q_70/learn/superbadges/superbadge_aap/dcfd3a2d114b5954ea59f2b2cd061121_badge.png&quot;,&quot;points&quot;:&quot;16,000&quot;,&quot;title&quot;:&quot;Advanced Apex Specialist&quot;,&quot;subTitle&quot;:&quot;Superbadge&quot;,&quot;type&quot;:&quot;superbadge&quot;,&quot;estimatedTime&quot;:&quot;~16 hrs&quot;,&quot;unitCount&quot;:9,&quot;path&quot;:&quot;https://trailhead.salesforce.com/content/learn/superbadges/superbadge_aap&quot;,&quot;private&quot;:false,&quot;preview&quot;:null,&quot;tags&quot;:null},&quot;labels&quot;:{&quot;preview&quot;:&quot;preview&quot;,&quot;updated&quot;:&quot;Updated %{date}&quot;,&quot;completed&quot;:&quot;Completed %{date}&quot;,&quot;due&quot;:&quot;Due %{date}&quot;,&quot;points&quot;:&quot;+%{n} points&quot;,&quot;currency&quot;:&quot;$%{n}&quot;,&quot;registerNow&quot;:&quot;Register Now&quot;,&quot;progress&quot;:&quot;Progress: %{n}%&quot;,&quot;previewTooltip&quot;:&quot;Content Collection: %{namespace}, Release: %{releasedAt}. Last updated on %{updatedAt}.&quot;,&quot;showNUnits&quot;:&quot;Show %{n} Units&quot;,&quot;hideNUnits&quot;:&quot;Hide %{n} Units&quot;,&quot;showNSteps&quot;:&quot;Show %{n} Steps&quot;,&quot;hideNSteps&quot;:&quot;Hide %{n} Steps&quot;,&quot;unitCompleted&quot;:&quot;Completed&quot;,&quot;unitIncomplete&quot;:&quot;Incomplete&quot;},&quot;assetPaths&quot;:{&quot;loader&quot;:&quot;/assets/ajax-loader-round-004b46cbdbf5c291cff9332ee40126c64fefef0921f0d04ea936b275b278fbf4.gif&quot;},&quot;superbadgeSet&quot;:null}" data-hydrate="t" data-react-cache-id="ContentEndCap-0"><div class="tds-dotted-trail" data-reactroot=""><div class="slds-grid slds-grid_align-center"><div style="width:12rem" class="slds-text-align_center slds-text-body_small tds-color_meteorite"><div class="slds-grid slds-grid_align-center"><div><div aria-hidden="true" tabindex="-1" class="slds-is-relative slds-show_inline-block"><img src="https://res.cloudinary.com/hy4kyit2a/f_auto,fl_lossy,q_70/learn/superbadges/superbadge_aap/dcfd3a2d114b5954ea59f2b2cd061121_badge.png" alt="" style="height:90px;width:90px"/><div style="position:absolute;bottom:-0.25rem;right:-0.75rem;border:3px solid white;border-radius:100%"><span class="slds-icon_container slds-show slds-icon_container_circle tds-bg_meteorite"><svg aria-hidden="true" class="tds-fill_white slds-icon slds-icon_x-small slds-icon-text-default"><use href="/packs/media/svg/symbols-857bab0e.svg#lock"></use></svg><span class="slds-assistive-text">locked</span></span></div></div></div></div><div class="slds-m-top_x-small">~16 hrs</div></div></div></div></div>
</div>

</main>

  <th-footer api-path="/api/v1/ui/footer.js" locale=""></th-footer>

</div>

<div id='interaction-studio-placeholder'></div>
<style>
:root {
  --tds-z-index-toast: 90000;
  --tds-toaster-offset-top: 150px;
}
</style>


<tds-toaster></tds-toaster>

<!--  on :  (production Deployed: ) -->
</body>
  </foreignObject>
</svg>

<h1> Learnings </h1>
A developer can delete a protected component in a future release without worrying about failing installations. However, once a component is marked as unprotected and is released globally, the developer can’t delete it.

 Product2.Family.getDescribe().getPicklistValues() - code to get picklist values.

 Final varaibles can be assigned values during declaration or in the static block.

 Apex runs in `System mode`.
 Use 'with sharing' and 'without sharing' on class to enforce sharing rules not object permissions.

 Sharing Rules (https://www.sfdc-lightning.com/2018/11/with-sharing-and-without-sharing-in.html)

 Product object does not store the unit price of a product.
 Unit price is stored in PriceBookEntry2 object.

Button overrides are different for Classic, Lightning and Mobile Experience.

 Aggrigate Queries : AggregateResult aggResult : [SELECT Product2Id, SUM(Quantity)quants FROM OrderItem WHERE Product2Id IN :productMap.keySet() GROUP BY Product2Id

 Access aggregate result using aggResult.get('Product2Id'), aggResult.get('quants') or aggResult.get('expr0')
where expr0 represents first aggregrate function alias

 Use $ObjectType['sObjectName'].fields['fieldName'].Type  OR $ObjectType.Product2.fields.Name.Label 
 to reference dynamic field name in apex:column.
 https://developer.salesforce.com/docs/atlas.en-us.pages.meta/pages/pages_dynamic_vf_globals_objecttype.htm

Each Order consists of multiple OrderItems.
OrderItem contains PriceBookEntryId field from where the price of the orderitem and product of the orderitem is determined.
Product2 does not contain any field to store its price. The price of the product is stored in the PriceBookEntry record which contains a lookup to Product2 and PriceBook.

Test.getStandardPricebookId() is the way to get standard price book id in test class.

//Set Current VF page while testing apex controller
PageReference pageRef = Page.success;
Test.setCurrentPage(pageRef);

//Insert feed on any object
insert new FeedItem(
    Body=p.Name+' Quantity is down to '+p.Quantity_Remaining__c,
    ParentId = p.Id// Id of the object
);

No requirement for Database.Stateful interface in Queuable class because execute method executes only once. We can chain queue one by another.

OrderItem are not supported for Standard List Controller.

getattribute does not work if get; set; defined earlier